{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"ESP32-C3 Filter Wheel Controller","text":"<p>A professional, open-source astronomy filter wheel controller built on the ESP32-C3 microcontroller. Features PID-based encoder control, integrated OLED display, and full ASCOM compatibility for seamless integration with popular astronomy software.</p>"},{"location":"#key-features","title":"\u2728 Key Features","text":""},{"location":"#pid-precision-control-v20","title":"\ud83c\udfaf PID Precision Control (v2.0)","text":"<ul> <li>Closed-loop PID controller with AS5600 magnetic encoder</li> <li>&lt;0.8\u00b0 positioning accuracy with automatic error correction</li> <li>Self-correcting for missed steps and mechanical errors</li> <li>Bidirectional movement - chooses shortest path automatically</li> <li>Tuned parameters (Kp=4.5, Ki=0.01, Kd=0.3) optimized for 28BYJ-48</li> </ul>"},{"location":"#flexible-configuration","title":"\ud83d\udd27 Flexible Configuration","text":"<ul> <li>3-9 filter positions (expanded from 3-8)</li> <li>Custom filter names up to 15 characters each</li> <li>Custom angle calibration for non-uniform filter spacing</li> <li>Runtime direction inversion for motor and encoder</li> <li>Persistent EEPROM storage for all settings</li> </ul>"},{"location":"#advanced-motor-control","title":"\ud83d\udd04 Advanced Motor Control","text":"<ul> <li>28BYJ-48 stepper motor with 2048 steps/revolution</li> <li>Configurable speed, acceleration, and disable delay</li> <li>Automatic power management reduces heat and power consumption</li> <li>Direction inversion without hardware rewiring</li> </ul>"},{"location":"#integrated-display","title":"\ud83d\udcdf Integrated Display","text":"<ul> <li>0.42\" OLED display (72x40 visible area)</li> <li>Real-time position and status information</li> <li>Filter name display with customizable labels</li> <li>180\u00b0 rotation support for flexible mounting</li> </ul>"},{"location":"#ascom-compatible","title":"\ud83c\udf10 ASCOM Compatible","text":"<ul> <li>Complete ASCOM driver integration</li> <li>Serial protocol (115200 baud, USB)</li> <li>NINA, PHD2, and other software support</li> <li>47+ serial commands for complete control</li> </ul>"},{"location":"#quick-start","title":"\ud83d\ude80 Quick Start","text":""},{"location":"#hardware-requirements","title":"Hardware Requirements","text":"<ul> <li>ESP32-C3 development board</li> <li>28BYJ-48 stepper motor with ULN2003 driver</li> <li>AS5600 magnetic encoder (required for PID control)</li> <li>0.42\" OLED display (SSD1306, I2C)</li> <li>Filter wheel assembly</li> <li>USB cable for programming and communication</li> </ul>"},{"location":"#assembly-guide","title":"Assembly Guide","text":"<p>Follow the step-by-step Assembly Guide to build your filter wheel controller.</p>"},{"location":"#setup-process","title":"Setup Process","text":"<ol> <li>Assemble Hardware - Follow the assembly guide</li> <li>Flash Firmware - Upload firmware to ESP32-C3 via PlatformIO</li> <li>Calibrate Encoder - Use <code>#CAL</code> command to set position 1</li> <li>Configure Filters - Set filter count and names</li> <li>Test Movement - Verify positioning accuracy</li> </ol>"},{"location":"#demo-video","title":"\ud83c\udfac Demo Video","text":"WIP"},{"location":"#specifications","title":"\ud83d\udccb Specifications","text":""},{"location":"#hardware-specifications","title":"Hardware Specifications","text":"Component Specification Microcontroller ESP32-C3 (160MHz, 320KB RAM, 4MB Flash) Display 0.42\" OLED SSD1306 (72x40 visible, I2C) Encoder AS5600 magnetic (12-bit, 0.088\u00b0/count, required) Motor 28BYJ-48 unipolar stepper (2048 steps/rev) Driver ULN2003 (5V, &lt;300mA) Filters 3-9 positions (configurable) Communication USB Serial (115200 baud, 8N1) Positioning Accuracy &lt;0.8\u00b0 with encoder, \u00b12-5\u00b0 without Power 5V USB (motor can use external 5-12V)"},{"location":"#supported-commands","title":"\ud83d\udee0\ufe0f Supported Commands","text":"<p>47+ serial commands organized by category:</p> Essential OperationsFilter ConfigurationCalibrationMotor ConfigurationDirection Inversion <pre><code>#GP              # Get current position\n#MP3             # Move to position 3\n#GF              # Get filter count\n#FC5             # Set filter count to 5\n#STATUS          # Get complete system status\n#STOP            # Emergency stop\n</code></pre> <pre><code>#GN              # Get all filter names\n#SN1:Luminance   # Set filter 1 name\n#SN2:Red         # Set filter 2 name\n</code></pre> <pre><code>#CAL             # Calibrate encoder offset (position 1 = 0\u00b0)\n#SETANG1:0.0     # Set custom angle for position 1\n#SETANG2:68.5    # Set custom angle for position 2\n#GETANG          # Get all custom angles\n#CLEARANG        # Clear custom angles\n</code></pre> <pre><code>#GMC             # Get motor configuration\n#MS400           # Set motor speed\n#MXS600          # Set max motor speed\n#MA200           # Set motor acceleration\n#MDD1000         # Set motor disable delay\n</code></pre> <pre><code>#MINV0           # Motor direction normal\n#MINV1           # Motor direction inverted\n#GMINV           # Get motor inversion status\n#ENCINV0         # Encoder direction normal\n#ENCINV1         # Encoder direction inverted\n#GENCINV         # Get encoder inversion status\n</code></pre> <p>Full Command Reference: ASCOM_COMMANDS.md</p>"},{"location":"#architecture-overview","title":"\ud83c\udfd7\ufe0f Architecture Overview","text":"<pre><code>graph TB\n    A[ESP32-C3 Controller] --&gt; B[ULN2003 Driver]\n    B --&gt; C[28BYJ-48 Stepper Motor]\n    C --&gt; D[Filter Wheel Assembly]\n    A --&gt; E[AS5600 Encoder]\n    E --&gt; D\n    A --&gt; F[OLED Display]\n    A --&gt; G[USB Serial Interface]\n    G --&gt; H[ASCOM Driver]\n    H --&gt; I[Astronomy Software]\n    I --&gt; J[NINA/PHD2/etc.]</code></pre>"},{"location":"#project-status","title":"\ud83d\udcc8 Project Status","text":"<ul> <li>\u2705 Current Release - v2.0.0 with PID control</li> <li>\ud83d\udd04 Active Development - Regular updates and improvements</li> <li>\ud83d\udcda Full Documentation - Complete command reference and assembly guides</li> </ul>"},{"location":"#whats-new-in-v200","title":"\ud83c\udd95 What's New in v2.0.0","text":""},{"location":"#major-features","title":"Major Features","text":"<ul> <li>PID-Based Encoder Control: Closed-loop feedback for &lt;0.8\u00b0 accuracy</li> <li>Custom Angle Calibration: Support for non-uniform filter spacing</li> <li>Direction Inversion: Runtime motor and encoder direction control</li> <li>Extended Filter Support: Now supports 3-9 filter positions</li> <li>Simplified Calibration: One-step <code>#CAL</code> command replaces complex wizards</li> </ul>"},{"location":"#technical-improvements","title":"Technical Improvements","text":"<ul> <li>Removed 1000+ lines of obsolete calibration code</li> <li>Automatic Error Correction: Self-corrects missed steps and mechanical errors</li> <li>Bidirectional Movement: Chooses shortest path to target</li> <li>Complete EEPROM Persistence: All settings auto-load at startup</li> </ul>"},{"location":"#breaking-changes-from-v1x","title":"Breaking Changes from v1.x","text":"<ul> <li>Removed: <code>REVCAL</code>, <code>BLCAL</code>, and related calibration commands</li> <li>Changed: <code>#CAL</code> now calibrates encoder offset (simplified)</li> <li>Added: Custom angle commands (<code>SETANG</code>, <code>GETANG</code>, <code>CLEARANG</code>)</li> <li>Added: Direction inversion commands (<code>MINV</code>, <code>ENCINV</code>, etc.)</li> </ul> <p>Ready to build your own DIY filter wheel controller? Get started with the Assembly Guide!</p>"},{"location":"commands/overview/","title":"Command Reference","text":"<p>The ESP32-C3 Filter Wheel Controller provides 47+ serial commands for complete control and configuration. All commands use a simple text-based protocol over USB serial at 115200 baud.</p>"},{"location":"commands/overview/#quick-start","title":"\ud83d\ude80 Quick Start","text":""},{"location":"commands/overview/#connection-settings","title":"Connection Settings","text":"<pre><code>Port: Auto-detect COM port\nBaud Rate: 115200\nData Bits: 8\nParity: None\nStop Bits: 1\nFlow Control: None\nLine Ending: LF (\\n)\n</code></pre>"},{"location":"commands/overview/#basic-command-format","title":"Basic Command Format","text":"<pre><code>#COMMAND[parameters]\\n\n</code></pre> <ul> <li>Prefix: <code>#</code> (required)</li> <li>Command: Case-sensitive command name</li> <li>Parameters: Command-specific values</li> <li>Termination: Line feed (<code>\\n</code>)</li> </ul>"},{"location":"commands/overview/#essential-commands","title":"Essential Commands","text":"<pre><code>#GP              # Get current position\n#MP3             # Move to position 3\n#STATUS          # Get complete system status\n#CAL             # Calibrate encoder offset\n#STOP            # Emergency stop\n</code></pre>"},{"location":"commands/overview/#command-categories","title":"\ud83d\udcda Command Categories","text":""},{"location":"commands/overview/#essential-operations","title":"\ud83c\udfaf Essential Operations","text":"<p>Core movement and status commands</p> Command Description Example Response <code>#GP</code> Get current position <code>P3</code> <code>#MP[1-9]</code> Move to position <code>M3</code> <code>#SP[1-9]</code> Set current position <code>SP3</code> <code>#GF</code> Get filter count <code>F5</code> <code>#FC[3-9]</code> Set filter count <code>FC5</code> <code>#STOP</code> Emergency stop <code>STOPPED</code> <code>#STATUS</code> System status <code>STATUS:POS=3,MOVING=NO,...</code>"},{"location":"commands/overview/#filter-configuration","title":"\ud83d\udcdd Filter Configuration","text":"<p>Manage filter names and positions</p> Command Description Example <code>#GN</code> Get all filter names <code>NAMES:Luminance,Red,Green,...</code> <code>#GN[1-9]</code> Get specific filter name <code>N2:Red</code> <code>#SN[1-9]:Name</code> Set filter name <code>#SN1:Luminance</code>"},{"location":"commands/overview/#calibration-custom-angles","title":"\ud83c\udfaf Calibration &amp; Custom Angles","text":"<p>Configure encoder and position angles</p> Command Description Example <code>#CAL</code> Calibrate encoder offset <code>CALIBRATED</code> <code>#SETANG[1-9]:[angle]</code> Set custom angle <code>#SETANG1:0.0</code> <code>#GETANG</code> Get all custom angles <code>ANGLES:0.0,68.5,142.3,...</code> <code>#GETANG[1-9]</code> Get specific angle <code>ANG2:68.5</code> <code>#CLEARANG</code> Clear custom angles <code>CLEARANG:OK</code>"},{"location":"commands/overview/#motor-configuration","title":"\u2699\ufe0f Motor Configuration","text":"<p>Adjust motor speed, acceleration, and behavior</p> Command Description Range <code>#GMC</code> Get motor configuration - <code>#MS[value]</code> Set motor speed 50-3000 steps/s <code>#MXS[value]</code> Set max motor speed 100-5000 steps/s <code>#MA[value]</code> Set motor acceleration 50-2000 steps/s\u00b2 <code>#MDD[value]</code> Set motor disable delay 500-10000 ms <code>#RMC</code> Reset motor config -"},{"location":"commands/overview/#direction-inversion","title":"\ud83d\udd04 Direction Inversion","text":"<p>Configure motor and encoder direction</p> Command Description Response <code>#MINV0</code> Motor direction normal <code>MINV:Normal</code> <code>#MINV1</code> Motor direction inverted <code>MINV:Inverted</code> <code>#GMINV</code> Get motor inversion <code>GMINV:0 (Normal)</code> <code>#ENCINV0</code> Encoder direction normal <code>ENCINV:Normal</code> <code>#ENCINV1</code> Encoder direction inverted <code>ENCINV:Inverted</code> <code>#GENCINV</code> Get encoder inversion <code>GENCINV:0 (Normal)</code>"},{"location":"commands/overview/#encoder-diagnostics","title":"\ud83d\udd2c Encoder Diagnostics","text":"<p>Monitor and debug encoder</p> Command Description <code>#ENCSTATUS</code> Complete encoder status <code>#ENCDIR</code> Rotation direction <code>#ENCRAW</code> Raw encoder data"},{"location":"commands/overview/#manual-control","title":"\ud83c\udfae Manual Control","text":"<p>Direct motor control for testing</p> Command Description <code>#SF[steps]</code> Step forward <code>#SB[steps]</code> Step backward <code>#ME</code> Enable motor <code>#MD</code> Disable motor <code>#TESTMOTOR</code> Test motor sequence"},{"location":"commands/overview/#display-control","title":"\ud83d\udcfa Display Control","text":"<p>Manage OLED display</p> Command Description <code>#ROTATE</code> Toggle display rotation <code>#DISPLAY</code> Get display info"},{"location":"commands/overview/#i-system-information","title":"\u2139\ufe0f System Information","text":"<p>Device identification and help</p> Command Description Response <code>#ID</code> Get device ID <code>ESP32FW-PID-V2.0</code> <code>#VER</code> Get firmware version <code>2.0.0</code> <code>#HELP</code> Show command list Multi-line help"},{"location":"commands/overview/#common-workflows","title":"\ud83d\udd04 Common Workflows","text":""},{"location":"commands/overview/#initial-setup","title":"Initial Setup","text":"<pre><code>#CAL              # Calibrate encoder (position 1 = 0\u00b0)\n#FC5              # Configure 5 filters\n#SN1:Luminance    # Set filter names\n#SN2:Red\n#SN3:Green\n#SN4:Blue\n#SN5:H-Alpha\n#STATUS           # Verify configuration\n</code></pre>"},{"location":"commands/overview/#custom-angle-configuration","title":"Custom Angle Configuration","text":"<p>For non-uniform filter spacing: <pre><code>#SETANG1:0.0      # Position 1 at 0\u00b0\n#SETANG2:68.5     # Position 2 at 68.5\u00b0\n#SETANG3:142.3    # Position 3 at 142.3\u00b0\n#SETANG4:210.0    # Position 4 at 210.0\u00b0\n#SETANG5:285.0    # Position 5 at 285.0\u00b0\n#GETANG           # Verify angles\n</code></pre></p>"},{"location":"commands/overview/#motor-tuning","title":"Motor Tuning","text":"<pre><code>#GMC              # Get current motor config\n#MS400            # Set motor speed\n#MA200            # Set acceleration\n#MDD1000          # Set disable delay\n</code></pre>"},{"location":"commands/overview/#direction-correction","title":"Direction Correction","text":"<pre><code>#GMINV            # Check motor direction\n#MINV1            # Invert if needed\n#GENCINV          # Check encoder direction\n#ENCINV1          # Invert if needed\n</code></pre>"},{"location":"commands/overview/#response-format","title":"\ud83d\udce1 Response Format","text":""},{"location":"commands/overview/#success-response","title":"Success Response","text":"<pre><code>Command: #MP3\nResponse: M3\n</code></pre>"},{"location":"commands/overview/#error-response","title":"Error Response","text":"<pre><code>Command: #MP10\nResponse: ERROR:Invalid position\n</code></pre>"},{"location":"commands/overview/#status-response","title":"Status Response","text":"<pre><code>Command: #STATUS\nResponse: STATUS:POS=3,MOVING=NO,CAL=YES,ERROR=0,ANGLE=144.50,TARGET_ANGLE=144.00,ANGLE_ERROR=0.50,CONTROL=ENCODER\n</code></pre>"},{"location":"commands/overview/#common-errors","title":"\u26a0\ufe0f Common Errors","text":"Error Meaning Solution <code>ERROR:Invalid command</code> Command not recognized Check command spelling <code>ERROR:Invalid position</code> Position out of range Use position 1-N (N=filter count) <code>ERROR:Invalid parameter</code> Parameter out of range Check value ranges <code>ERROR:System busy</code> Motor moving Wait for movement to complete <code>ERROR:Encoder not available</code> Encoder required but not detected Check AS5600 connection"},{"location":"commands/overview/#performance","title":"\ud83d\udcca Performance","text":""},{"location":"commands/overview/#pid-control-performance","title":"PID Control Performance","text":"<ul> <li>Positioning Accuracy: &lt;0.8\u00b0 (configurable via <code>ANGLE_CONTROL_TOLERANCE</code>)</li> <li>Control Loop: Maximum 30 iterations</li> <li>Settling Time: 150ms per iteration</li> <li>Self-Correction: Automatic error compensation</li> </ul>"},{"location":"commands/overview/#command-response-times","title":"Command Response Times","text":"<ul> <li>Basic queries: &lt; 1ms</li> <li>Movement commands: Blocking (waits for completion)</li> <li>Configuration changes: &lt; 10ms (includes EEPROM write)</li> </ul>"},{"location":"commands/overview/#external-references","title":"\ud83d\udd17 External References","text":"<p>Complete Command Documentation: ASCOM_COMMANDS.md</p> <p>Developer Guide: CLAUDE.md</p> <p>For detailed command specifications, parameter ranges, and ASCOM integration examples, see ASCOM_COMMANDS.md.</p>"},{"location":"getting-started/assembly-uln2003/","title":"ULN2003 + 28BYJ-48 Assembly Guide","text":"<p>This guide covers assembling the budget-friendly configuration using the ULN2003 driver with 28BYJ-48 stepper motor.</p>"},{"location":"getting-started/assembly-uln2003/#prerequisites","title":"Prerequisites","text":"<p>Before starting, ensure you have: - \u2705 Gathered all required components - \u2705 Basic soldering skills - \u2705 Multimeter for testing - \u2705 PlatformIO installed for firmware upload</p>"},{"location":"getting-started/assembly-uln2003/#wiring-diagram-reference","title":"Wiring Diagram Reference","text":""},{"location":"getting-started/assembly-uln2003/#step-by-step-assembly","title":"Step-by-Step Assembly","text":""},{"location":"getting-started/assembly-uln2003/#step-1-prepare-the-esp32-c3-board","title":"Step 1: Prepare the ESP32-C3 Board","text":"<ol> <li>Inspect the board for any obvious damage</li> <li>Test basic functionality:    <pre><code># Connect via USB and verify in device manager/terminal\n# Board should enumerate as USB device\n</code></pre></li> <li>Note pin locations - Compare with your specific board layout</li> </ol> <p>Pin Compatibility</p> <p>Different ESP32-C3 boards may have different pin layouts. Verify your board matches the expected GPIO assignments.</p>"},{"location":"getting-started/assembly-uln2003/#step-2-prepare-the-uln2003-driver","title":"Step 2: Prepare the ULN2003 Driver","text":"<ol> <li>Inspect the ULN2003 board:</li> <li>Check for cold solder joints</li> <li>Verify all components are properly seated</li> <li> <p>Look for the LED indicators (A, B, C, D)</p> </li> <li> <p>Test the driver (optional but recommended):</p> </li> <li>Connect 5V and GND</li> <li>Briefly touch IN1-IN4 to 5V - corresponding LEDs should light</li> </ol>"},{"location":"getting-started/assembly-uln2003/#step-3-motor-driver-connections","title":"Step 3: Motor Driver Connections","text":"<p>Connect the ESP32-C3 to ULN2003 following this pinout:</p> ESP32-C3 Pin ULN2003 Pin Wire Color Function GPIO2 IN1 Blue Motor phase A GPIO3 IN2 Green Motor phase B GPIO4 IN3 Yellow Motor phase C GPIO10 IN4 Orange Motor phase D 5V VCC Red Power supply GND GND Black Ground <p>Wiring Tips</p> <ul> <li>Use different colored wires for easy identification</li> <li>Keep control wires away from power wires</li> <li>Use solid core wire for breadboard connections</li> <li>Use stranded wire for final assembly</li> </ul>"},{"location":"getting-started/assembly-uln2003/#step-4-motor-connection","title":"Step 4: Motor Connection","text":"<ol> <li>Connect the 28BYJ-48 motor:</li> <li>The motor comes with a 5-pin JST connector</li> <li>Connect directly to the ULN2003 motor output</li> <li> <p>Ensure connector is fully seated</p> </li> <li> <p>Verify motor wiring:</p> </li> <li>The wire colors should match (usually Red center, then Blue, Pink, Yellow, Orange)</li> <li>If colors don't match, refer to your motor's datasheet</li> </ol>"},{"location":"getting-started/assembly-uln2003/#step-5-display-connection-i2c","title":"Step 5: Display Connection (I2C)","text":"<p>Connect the 0.42\" OLED display:</p> ESP32-C3 Pin OLED Pin Function GPIO5 SDA I2C Data GPIO6 SCL I2C Clock 3.3V VCC Power (3.3V only!) GND GND Ground <p>Voltage Warning</p> <p>The OLED display requires 3.3V, not 5V. Connecting 5V will damage the display permanently.</p>"},{"location":"getting-started/assembly-uln2003/#step-6-encoder-connection-optional","title":"Step 6: Encoder Connection (Optional)","text":"<p>If using the AS5600 magnetic encoder:</p> ESP32-C3 Pin AS5600 Pin Function GPIO5 SDA I2C Data (shared with OLED) GPIO6 SCL I2C Clock (shared with OLED) 3.3V VCC Power (3.3V only!) GND GND Ground <p>Magnet placement: - Position the diametric magnet 0.5-3mm above the AS5600 chip - Ensure the magnet rotates with the filter wheel - Center the magnet over the chip for best accuracy</p>"},{"location":"getting-started/assembly-uln2003/#step-7-power-supply-options","title":"Step 7: Power Supply Options","text":""},{"location":"getting-started/assembly-uln2003/#option-a-usb-power-simple","title":"Option A: USB Power (Simple)","text":"<ul> <li>Power everything through the ESP32-C3's USB connection</li> <li>Limitation: May not provide enough current for continuous operation</li> <li>Best for: Testing and light-duty use</li> </ul>"},{"location":"getting-started/assembly-uln2003/#option-b-external-5v-supply-recommended","title":"Option B: External 5V Supply (Recommended)","text":"<ul> <li>Use a 5V/2A wall adapter or bench supply</li> <li>Connect to ESP32-C3's VIN pin and ULN2003's VCC</li> <li>Best for: Reliable operation and continuous use</li> </ul>"},{"location":"getting-started/assembly-uln2003/#step-8-initial-testing","title":"Step 8: Initial Testing","text":"<ol> <li>Visual inspection:</li> <li>Check all connections against the diagram</li> <li>Ensure no short circuits</li> <li> <p>Verify proper wire routing</p> </li> <li> <p>Power-on test:    <pre><code># Connect power and verify:\n# - ESP32-C3 LED indicators\n# - OLED display shows content\n# - No smoke or unusual heat\n</code></pre></p> </li> <li> <p>Basic functionality test:    <pre><code># Upload firmware and test basic commands:\n#GP          # Should return current position\n#STATUS      # Should show system status\n#MP2         # Should move motor (if calibrated)\n</code></pre></p> </li> </ol>"},{"location":"getting-started/assembly-uln2003/#step-9-mechanical-assembly","title":"Step 9: Mechanical Assembly","text":"<ol> <li>Mount the motor:</li> <li>Secure the 28BYJ-48 to your filter wheel assembly</li> <li>Ensure proper alignment with the filter wheel axis</li> <li> <p>Use flexible coupling if needed to prevent binding</p> </li> <li> <p>Mount the electronics:</p> </li> <li>Install ESP32-C3 and ULN2003 in enclosure</li> <li>Route wires cleanly to avoid interference</li> <li> <p>Ensure adequate ventilation</p> </li> <li> <p>Install the encoder (if used):</p> </li> <li>Mount AS5600 board so the magnet passes over the sensor</li> <li>Verify 0.5-3mm air gap</li> <li>Test rotation through full range</li> </ol>"},{"location":"getting-started/assembly-uln2003/#step-10-software-configuration","title":"Step 10: Software Configuration","text":"<ol> <li> <p>Configure the firmware:    <pre><code>// In src/config.h, ensure this line is uncommented:\n#define MOTOR_DRIVER_ULN2003\n\n// Verify pin assignments match your wiring:\n#define MOTOR_PIN1 2    // Connected to ULN2003 IN1\n#define MOTOR_PIN2 3    // Connected to ULN2003 IN2\n#define MOTOR_PIN3 4    // Connected to ULN2003 IN3\n#define MOTOR_PIN4 10   // Connected to ULN2003 IN4\n</code></pre></p> </li> <li> <p>Build and upload:    <pre><code>pio run -t upload\n</code></pre></p> </li> <li> <p>Initial calibration:    <pre><code># Connect to serial monitor (115200 baud)\n#CAL         # Calibrate current position as home\n#MP2         # Test movement to position 2\n#GP          # Verify position\n</code></pre></p> </li> </ol>"},{"location":"getting-started/assembly-uln2003/#troubleshooting","title":"Troubleshooting","text":""},{"location":"getting-started/assembly-uln2003/#motor-doesnt-move","title":"Motor doesn't move","text":"<ul> <li>Check power supply - ULN2003 needs adequate 5V current</li> <li>Verify wiring - Ensure all IN1-IN4 connections are correct</li> <li>Test driver - LEDs on ULN2003 should light during movement</li> <li>Check motor - Verify motor connector is fully seated</li> </ul>"},{"location":"getting-started/assembly-uln2003/#erratic-movement","title":"Erratic movement","text":"<ul> <li>Loose connections - Check all wire connections</li> <li>Power supply noise - Use decoupling capacitors</li> <li>Interference - Route control wires away from power wires</li> </ul>"},{"location":"getting-started/assembly-uln2003/#display-issues","title":"Display issues","text":"<ul> <li>Blank display - Check 3.3V power and I2C connections</li> <li>Partial display - Verify I2C address (usually 0x3C)</li> <li>No response - Ensure SDA/SCL aren't swapped</li> </ul>"},{"location":"getting-started/assembly-uln2003/#encoder-problems","title":"Encoder problems","text":"<ul> <li>No angle reading - Check magnet position and 3.3V power</li> <li>Erratic readings - Verify magnet distance (0.5-3mm)</li> <li>I2C conflicts - Ensure AS5600 and OLED have different addresses</li> </ul>"},{"location":"getting-started/assembly-uln2003/#performance-optimization","title":"Performance Optimization","text":""},{"location":"getting-started/assembly-uln2003/#motor-tuning","title":"Motor Tuning","text":"<pre><code>// In src/config.h, adjust these values:\n#define MOTOR_SPEED 300.0           // Steps per second\n#define MAX_MOTOR_SPEED 500.0       // Maximum speed\n#define MOTOR_ACCELERATION 200.0     // Acceleration\n</code></pre>"},{"location":"getting-started/assembly-uln2003/#movement-optimization","title":"Movement Optimization","text":"<ul> <li>Lower speeds reduce noise and improve reliability</li> <li>Higher acceleration provides faster movements</li> <li>Unidirectional mode prevents backlash issues</li> </ul>"},{"location":"getting-started/assembly-uln2003/#next-steps","title":"Next Steps","text":"<p>Once assembly is complete:</p> <ol> <li>Initial Setup - Configure filter names and positions using serial commands</li> <li>Calibration - Perform precision calibration with <code>#CAL</code> and <code>#REVCAL</code> commands</li> <li>ASCOM Integration - Connect to astronomy software using the serial protocol</li> </ol>"},{"location":"getting-started/assembly-uln2003/#additional-resources","title":"Additional Resources","text":"<ul> <li>Command Reference - Complete serial command documentation</li> <li>ASCOM Commands - Full ASCOM integration guide</li> <li>GitHub Repository - Source code and latest updates</li> </ul>"},{"location":"getting-started/hardware/","title":"Hardware Requirements","text":"<p>This page details all the components needed to build your ESP32-C3 Filter Wheel Controller. Components are organized by priority, with alternatives and sourcing information provided.</p>"},{"location":"getting-started/hardware/#core-components-required","title":"\ud83d\udd27 Core Components (Required)","text":"<p>These components are essential for basic functionality:</p>"},{"location":"getting-started/hardware/#esp32-c3-development-board","title":"ESP32-C3 Development Board","text":"<p>The brain of your filter wheel controller</p> Specification Requirement Recommended Chip ESP32-C3 ESP32-C3-DevKitM-1 Flash Minimum 4MB 4MB or higher RAM 400KB (built-in) Standard USB USB-C preferred Native USB support GPIO Minimum 8 pins 13+ available pins Recommended BoardsWhere to Buy <ul> <li>Espressif ESP32-C3-DevKitM-1 - Official board, excellent support</li> <li>Seeed XIAO ESP32C3 - Ultra-compact form factor</li> <li>M5Stack STAMP-C3 - Integrated antenna, robust design</li> </ul> <ul> <li>AliExpress: $3-6 (longer shipping)</li> <li>Amazon: $8-12 (fast shipping)</li> <li>Mouser/DigiKey: $6-10 (authentic, reliable)</li> <li>Adafruit: $8-10 (excellent support)</li> </ul> <p>Board Selection</p> <p>Any ESP32-C3 board will work, but boards with USB-C and good pin labeling make development easier.</p>"},{"location":"getting-started/hardware/#28byj-48-stepper-motor-uln2003-driver","title":"28BYJ-48 Stepper Motor + ULN2003 Driver","text":"<p>Provides precise rotational movement</p> Specification Value Notes Type 28BYJ-48 Unipolar Stepper Industry standard Steps/Revolution 2048 (with gearbox) 64:1 internal gearing Voltage 5V or 12V versions 5V recommended Torque ~300 g\u22c5cm at 5V Sufficient for filter wheels Driver ULN2003 Darlington Array Usually included with motor Kit ContentsSourcing <p>Most kits include: - 28BYJ-48 stepper motor - ULN2003 driver board - 5-pin connector cable - Mounting screws</p> <ul> <li>AliExpress: $2-4 per kit</li> <li>Amazon: $8-12 for pack of 5</li> <li>Local electronics stores: $5-8 each</li> </ul> <p>Voltage Compatibility</p> <p>Ensure you get the 5V version of the motor, or use external 12V supply for 12V version.</p>"},{"location":"getting-started/hardware/#042-oled-display-ssd1306","title":"0.42\" OLED Display (SSD1306)","text":"<p>Provides real-time status display</p> Specification Requirement Notes Size 0.42 inch diagonal 72\u00d740 visible pixels Controller SSD1306 or compatible I2C interface required Voltage 3.3V operation ESP32-C3 compatible Interface I2C (4 pins: VCC, GND, SCL, SDA) Standard connection Display FeaturesAlternative Sizes <ul> <li>Resolution: 128\u00d764 pixels (72\u00d740 visible)</li> <li>Colors: Monochrome (white on black)</li> <li>Viewing angle: ~160 degrees</li> <li>Interface: I2C (address 0x3C)</li> </ul> <ul> <li>0.96\" - Larger, easier to read (requires code changes)</li> <li>1.3\" - Even larger option (requires code changes)</li> <li>0.42\" - Exact fit for compact designs (recommended)</li> </ul> <p>Cost: $3-8 depending on supplier and quantity</p>"},{"location":"getting-started/hardware/#precision-components-highly-recommended","title":"\ud83c\udfaf Precision Components (Highly Recommended)","text":""},{"location":"getting-started/hardware/#as5600-magnetic-rotary-encoder","title":"AS5600 Magnetic Rotary Encoder","text":"<p>Enables precise position feedback and calibration</p> Specification Value Benefits Resolution 12-bit (4096 positions/rev) Sub-degree accuracy Interface I2C (address 0x36) Easy integration Magnet 6mm diametrically magnetized Usually included Distance 0.5-3mm from magnet Flexible mounting Why Include This?Kit Contents <p>\u2705 Backlash calibration - Automatic mechanical compensation \u2705 Position verification - Confirms accurate positioning \u2705 Missed step detection - Recovers from motor errors \u2705 Sub-step accuracy - Better than stepper resolution</p> <ul> <li>AS5600 breakout board</li> <li>6mm diametric magnet</li> <li>Pin headers (may need soldering)</li> </ul> <p>Cost: $3-10 depending on supplier</p> <p>Optional but Recommended</p> <p>While not strictly required, the encoder significantly improves accuracy and enables advanced calibration features.</p>"},{"location":"getting-started/hardware/#connection-components","title":"\ud83d\udd0c Connection Components","text":""},{"location":"getting-started/hardware/#breadboard-or-perfboard","title":"Breadboard or Perfboard","text":"<p>For prototyping and permanent connections</p> Prototyping PhasePermanent Build <ul> <li>Half-size breadboard - Good for initial testing</li> <li>Full-size breadboard - More space for components</li> <li>Breadboard jumper wires - Various male-to-male, female-to-male</li> </ul> <ul> <li>Perfboard/stripboard - For soldered connections</li> <li>Custom PCB - Advanced option, not necessary</li> </ul> <p>Cost: $3-10 for breadboard setup, $5-15 for perfboard materials</p>"},{"location":"getting-started/hardware/#connecting-wires","title":"Connecting Wires","text":"<p>Various wire types for different connections</p> Connection Type Wire Type Length Quantity Breadboard Male-to-Male jumpers 10-20cm 20+ pieces Board-to-Board Female-to-Male jumpers 10-20cm 10+ pieces Power 22-24 AWG stranded 50cm 2 colors (red/black) Stepper Motor 5-pin connector Included with motor 1 piece <p>Cost: $5-10 for assorted wire kit</p>"},{"location":"getting-started/hardware/#enclosure-options","title":"\ud83c\udfe0 Enclosure Options","text":""},{"location":"getting-started/hardware/#3d-printed-enclosure","title":"3D Printed Enclosure","text":"<p>Custom-designed housing for your controller</p> Design Files ProvidedPrinting Requirements <ul> <li>STL files for direct 3D printing</li> <li>OpenSCAD source for customization</li> <li>Multiple variants for different configurations</li> </ul> <ul> <li>Material: PLA or PETG</li> <li>Layer height: 0.2mm</li> <li>Support: Minimal required</li> <li>Print time: 2-4 hours depending on size</li> </ul> <p>Cost: $2-5 in filament (if you have access to 3D printer)</p>"},{"location":"getting-started/hardware/#alternative-enclosures","title":"Alternative Enclosures","text":"Project BoxLaser Cut AcrylicDIY Solutions <ul> <li>Plastic electronics enclosure 100\u00d780\u00d740mm</li> <li>Cost: $8-15</li> <li>Pros: Professional appearance, readily available</li> <li>Cons: Requires drilling for connectors</li> </ul> <ul> <li>Clear or colored acrylic panels</li> <li>Cost: $10-20 (if you have laser cutter access)</li> <li>Pros: Clean appearance, customizable</li> <li>Cons: Requires access to laser cutter</li> </ul> <ul> <li>Cardboard prototype - Free, temporary solution</li> <li>Wooden box - Natural materials, customizable</li> <li>Repurposed enclosure - Cost-effective option</li> </ul>"},{"location":"getting-started/hardware/#power-options","title":"\u26a1 Power Options","text":""},{"location":"getting-started/hardware/#usb-power-recommended-for-most-users","title":"USB Power (Recommended for Most Users)","text":"<p>Simple and convenient power solution</p> <ul> <li>Source: USB-C cable from ESP32-C3 to computer/USB hub</li> <li>Voltage: 5V regulated by ESP32-C3 board</li> <li>Current: ~500mA maximum (sufficient for most operations)</li> <li>Pros: Simple, no additional components needed</li> <li>Cons: May not provide enough current for high-torque operations</li> </ul>"},{"location":"getting-started/hardware/#external-5v-supply-high-performance","title":"External 5V Supply (High Performance)","text":"<p>For demanding applications requiring more torque</p> Specification Requirement Voltage 5V \u00b15% Current Minimum 1A, 2A recommended Connector Barrel jack or screw terminals Regulation Switching supply preferred <p>When to Use: - Larger filter wheels requiring more torque - Continuous operation scenarios - Maximum movement speed requirements</p>"},{"location":"getting-started/hardware/#external-12v-supply-maximum-performance","title":"External 12V Supply (Maximum Performance)","text":"<p>For the highest torque and speed requirements</p> <p>Advanced Configuration</p> <p>Requires 12V version of 28BYJ-48 motor and voltage level conversion for ESP32-C3 (which operates at 3.3V).</p>"},{"location":"getting-started/hardware/#tools-required","title":"\ud83d\udee0\ufe0f Tools Required","text":""},{"location":"getting-started/hardware/#basic-tools-essential","title":"Basic Tools (Essential)","text":"<ul> <li>Soldering iron (temperature controlled preferred)</li> <li>Solder (60/40 or lead-free)</li> <li>Wire strippers for various wire gauges</li> <li>Small screwdrivers (Phillips and flathead)</li> <li>Multimeter for testing connections</li> </ul>"},{"location":"getting-started/hardware/#helpful-tools","title":"Helpful Tools","text":"<ul> <li>Breadboard for prototyping</li> <li>Desoldering braid for corrections</li> <li>Flux for easier soldering</li> <li>Heat shrink tubing for insulation</li> <li>Cable ties for wire management</li> </ul>"},{"location":"getting-started/hardware/#advanced-tools-optional","title":"Advanced Tools (Optional)","text":"<ul> <li>3D printer for custom enclosure</li> <li>Oscilloscope for advanced debugging</li> <li>Logic analyzer for protocol debugging</li> </ul>"},{"location":"getting-started/hardware/#complete-bill-of-materials","title":"\ud83d\udcb0 Complete Bill of Materials","text":""},{"location":"getting-started/hardware/#budget-build-25-35","title":"Budget Build (~$25-35)","text":"Component Quantity Unit Cost Total ESP32-C3 Board 1 $6 $6 28BYJ-48 + ULN2003 1 $4 $4 0.42\" OLED Display 1 $5 $5 Breadboard &amp; Wires 1 set $8 $8 Basic Enclosure 1 $5 $5 Budget Total ~$28"},{"location":"getting-started/hardware/#recommended-build-40-55","title":"Recommended Build (~$40-55)","text":"Component Quantity Unit Cost Total Previous items $28 AS5600 Encoder 1 $8 $8 External 5V Supply 1 $12 $12 Better Enclosure 1 $10 $10 Recommended Total ~$58"},{"location":"getting-started/hardware/#premium-build-70-90","title":"Premium Build (~$70-90)","text":"Component Quantity Unit Cost Total Previous items $58 Quality connectors 1 set $8 $8 Professional enclosure 1 $15 $15 Extra components $10 $10 Premium Total ~$91"},{"location":"getting-started/hardware/#sourcing-strategy","title":"\ud83d\uded2 Sourcing Strategy","text":""},{"location":"getting-started/hardware/#best-practices","title":"Best Practices","text":"<ol> <li>Start with basics - Get core components first, add encoder later</li> <li>Buy kits when available - Often cheaper than individual components</li> <li>Consider shipping - Consolidate orders to save on shipping costs</li> <li>Plan for spares - Get a few extra wires and connectors</li> </ol>"},{"location":"getting-started/hardware/#recommended-suppliers","title":"Recommended Suppliers","text":"For SpeedFor ValueFor Reliability <ul> <li>Amazon - Fast shipping, higher prices</li> <li>Adafruit - Quality components, great support</li> <li>SparkFun - Reliable, good documentation</li> </ul> <ul> <li>AliExpress - Lowest prices, slower shipping</li> <li>Banggood - Good compromise of price/speed</li> <li>LCSC - Electronic components specialist</li> </ul> <ul> <li>Mouser - Authentic components, premium pricing</li> <li>DigiKey - Extensive catalog, fast shipping</li> <li>Arrow - Professional supplier, bulk options</li> </ul> <p>Next Step: Once you have your components, proceed to the Assembly Guide (documentation coming soon)</p>"}]}